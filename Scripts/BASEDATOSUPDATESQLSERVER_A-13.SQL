
-- Script actualización BBDD.
-- Creación de tablas y constantes para listas de carga de camión.

-- Listas de carga de camión - Cabecera.
CREATE TABLE F80C001 (
	F80CNUMLST char(6) NOT NULL,			-- Nº de lista de carga
	F80CFECCRE datetime NOT NULL,			-- Fecha de creación
	F80CFECCNF datetime NOT NULL,			-- Fecha de confirmación
	F80CAGRTRP char(1) NOT NULL,			-- Agrupar por transportista (S/N)
	F80CIDENTD char(1) NOT NULL,			-- Identificar destino (S/N)
	F80CESTLST char(1) NOT NULL 			-- Estado de la lista
)
go

ALTER TABLE F80C001
       ADD PRIMARY KEY (F80CNUMLST)
go

-- Listas de carga de camión - Detalle.
CREATE TABLE F80L001 (
	F80LNUMLST char(6) NOT NULL,			-- Nº de lista de carga
	F80LCODPRO char(6) NOT NULL,			-- Propietario
	F80LTIPDOC char(4) NOT NULL,			-- Tipo documento
	F80LNUMDOC char(13) NOT NULL,			-- Nº documento
	F80LESTMOV char(1) NOT NULL, 			-- Estado de la línea
	F80LORDREC numeric(6,0) NOT NULL 		-- Orden
)
go

ALTER TABLE F80L001
       ADD PRIMARY KEY (F80LCODPRO, F80LTIPDOC, F80LNUMDOC)
go

CREATE INDEX IK_F80LNUMLST ON F80L001 (F80LNUMLST, F80LCODPRO, F80LTIPDOC, F80LNUMDOC)
go

ALTER TABLE F80L001
	ADD FOREIGN KEY (F80LNUMLST)
	REFERENCES F80C001
	ON DELETE CASCADE
go

 INSERT INTO F00A001 ( F00ACODNUM, F00ADESCRI, F00AABREVI, F00ANUMERO,F00AUSRLCK ) VALUES (
'NLCC', 'NUMERADOR DE LISTAS DE CARGA            ', 'LISTAS    ', 0,'      ');
GO

INSERT INTO F99A001 (F99ACODNUM, F99ADESCRI, F99AABREVI, F99AMINVAL, F99AMAXVAL,
 F99AINCVAL,F99ACURVAL, F99ACYCLE, F99AORDER, F99ACACHE, F99AVALUE ) VALUES (
'NLCC', 'NUMERADOR DE LISTAS DE CARGA            ', 'LISTAS    ',
1, 9999999999, 1, 1, 'Y', 'Y', 'D', 1);
GO

INSERT INTO F99I001 (F99ICODNUM, F99IDESCRI, F99IABREVI, F99IMINVAL, F99IMAXVAL,
 F99IINCVAL,F99ICURVAL, F99ICYCLE) VALUES (
'NLCC', 'NUMERADOR DE LISTAS DE CARGA            ', 'LISTAS    ',
1, 9999999999, 1, 1, 'Y');
GO

CREATE TABLE F99INLCC (F99ICODNUM CHAR(4),  F99IUSRCOD CHAR(6),  F99IDESCRI CHAR(40),
		       F99INUMERO DECIMAL (15) IDENTITY (              1,               1))
GO
